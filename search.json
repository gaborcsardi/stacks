[{"path":[]},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement [INSERT CONTACT METHOD]. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://stacks.tidymodels.org/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.0, available https://www.contributor-covenant.org/version/2/0/ code_of_conduct.html. Community Impact Guidelines inspired Mozilla’s code conduct enforcement ladder. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https:// www.contributor-covenant.org/translations.","code":""},{"path":"https://stacks.tidymodels.org/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2020 RStudio, PBC Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://stacks.tidymodels.org/articles/basics.html","id":"define-candidate-ensemble-members","dir":"Articles","previous_headings":"","what":"Define candidate ensemble members","title":"Getting Started With stacks","text":"highest level, ensembles formed model definitions. package, model definitions instance minimal workflow, containing model specification (defined parsnip package) , optionally, preprocessor (defined recipes package). Model definitions specify form candidate ensemble members.  Defining constituent model definitions undoubtedly longest part building ensemble stacks. ’re familiar tidymodels “proper,” ’re probably fine skip section, keeping things mind: ’ll need save assessment set predictions workflow utilized tune_grid(), tune_bayes(), fit_resamples() objects setting control arguments save_pred = TRUE save_workflow = TRUE. Note use control_stack_*() convenience functions ! model definition must share rsample rset object. ’ll first start splitting training data, generating resamples, setting options used model definition. Tuning fitting results use ensembles need fitted control arguments save_pred = TRUE save_workflow = TRUE—settings ensure assessment set predictions, well workflow used fit resamples, stored resulting object. convenience, stacks supplies control_stack_*() functions generate appropriate objects . example, ’ll working tune_grid() fit_resamples() tune package, use following control settings: ’ll define three different model definitions try predict time hatch—K-nearest neighbors model (hyperparameters tune), linear model, support vector machine model (, hyperparameters tune). Starting K-nearest neighbors, begin creating parsnip model specification: Note , since tuning several possible numbers neighbors, model specification defines multiple model configurations. specific form configurations determined specifying grid search tune_grid(). , extend basic recipe defined earlier fully specify form design matrix use K-nearest neighbors model: Starting basic recipe, convert categorical variables dummy variables, remove column one observation, impute missing values numeric variables using mean, normalize numeric predictors. Pre-processing instructions remaining models defined similarly. Now, combine model specification pre-processing instructions defined form workflow object: Finally, can make use workflow, training set resamples, metric set, control object tune hyperparameters. Using grid argument, specify like optimize four possible values k using grid search. knn_res object fully specifies candidate members, ready included stacks workflow. Now, specifying linear model, note optimizing hyperparameters. Thus, use fit_resamples() function rather tune_grid() tune_bayes() fitting resamples. Finally, putting together model definition support vector machine: Altogether, ’ve created three model definitions, K-nearest neighbors model definition specifies 4 model configurations, linear regression specifies 1, support vector machine specifies 6.  three model definitions fully specified, ready begin stacking model configurations. (Note , applied settings, one likely specify many 11 candidate members.)","code":"# some setup: resampling and a basic recipe set.seed(1) tree_frogs_split <- initial_split(tree_frogs) tree_frogs_train <- training(tree_frogs_split) tree_frogs_test  <- testing(tree_frogs_split)  set.seed(1) folds <- rsample::vfold_cv(tree_frogs_train, v = 5)  tree_frogs_rec <-    recipe(latency ~ ., data = tree_frogs_train)  metric <- metric_set(rmse) ctrl_grid <- control_stack_grid() ctrl_res <- control_stack_resamples() # create a model definition knn_spec <-   nearest_neighbor(     mode = \"regression\",      neighbors = tune(\"k\")   ) %>%   set_engine(\"kknn\")  knn_spec #> K-Nearest Neighbor Model Specification (regression) #>  #> Main Arguments: #>   neighbors = tune(\"k\") #>  #> Computational engine: kknn # extend the recipe knn_rec <-   tree_frogs_rec %>%   step_dummy(all_nominal()) %>%   step_zv(all_predictors(), skip = TRUE) %>%   step_meanimpute(all_numeric(), skip = TRUE) %>%   step_normalize(all_numeric(), skip = TRUE) #> Warning: `step_meanimpute()` was deprecated in recipes 0.1.16. #> Please use `step_impute_mean()` instead. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.  knn_rec #> Recipe #>  #> Inputs: #>  #>       role #variables #>    outcome          1 #>  predictor          4 #>  #> Operations: #>  #> Dummy variables from all_nominal() #> Zero variance filter on all_predictors() #> Mean imputation for all_numeric() #> Centering and scaling for all_numeric() # add both to a workflow knn_wflow <-    workflow() %>%    add_model(knn_spec) %>%   add_recipe(knn_rec)  knn_wflow #> ══ Workflow ══════════════════════════════════════════════════════════════ #> Preprocessor: Recipe #> Model: nearest_neighbor() #>  #> ── Preprocessor ────────────────────────────────────────────────────────── #> 4 Recipe Steps #>  #> • step_dummy() #> • step_zv() #> • step_impute_mean() #> • step_normalize() #>  #> ── Model ───────────────────────────────────────────────────────────────── #> K-Nearest Neighbor Model Specification (regression) #>  #> Main Arguments: #>   neighbors = tune(\"k\") #>  #> Computational engine: kknn # tune k and fit to the 5-fold cv set.seed(2020) knn_res <-    tune_grid(     knn_wflow,     resamples = folds,     metrics = metric,     grid = 4,     control = ctrl_grid   )  knn_res #> # Tuning results #> # 5-fold cross-validation  #> # A tibble: 5 × 5 #>   splits           id    .metrics         .notes           .predictions #>   <list>           <chr> <list>           <list>           <list>       #> 1 <split [343/86]> Fold1 <tibble [4 × 5]> <tibble [0 × 3]> <tibble>     #> 2 <split [343/86]> Fold2 <tibble [4 × 5]> <tibble [0 × 3]> <tibble>     #> 3 <split [343/86]> Fold3 <tibble [4 × 5]> <tibble [0 × 3]> <tibble>     #> 4 <split [343/86]> Fold4 <tibble [4 × 5]> <tibble [0 × 3]> <tibble>     #> 5 <split [344/85]> Fold5 <tibble [4 × 5]> <tibble [0 × 3]> <tibble> # create a model definition lin_reg_spec <-   linear_reg() %>%   set_engine(\"lm\")  # extend the recipe lin_reg_rec <-   tree_frogs_rec %>%   step_dummy(all_nominal()) %>%   step_zv(all_predictors(), skip = TRUE)  # add both to a workflow lin_reg_wflow <-    workflow() %>%   add_model(lin_reg_spec) %>%   add_recipe(lin_reg_rec)  # fit to the 5-fold cv set.seed(2020) lin_reg_res <-    fit_resamples(     lin_reg_wflow,     resamples = folds,     metrics = metric,     control = ctrl_res   )  lin_reg_res #> # Resampling results #> # 5-fold cross-validation  #> # A tibble: 5 × 5 #>   splits           id    .metrics         .notes           .predictions #>   <list>           <chr> <list>           <list>           <list>       #> 1 <split [343/86]> Fold1 <tibble [1 × 4]> <tibble [0 × 3]> <tibble>     #> 2 <split [343/86]> Fold2 <tibble [1 × 4]> <tibble [0 × 3]> <tibble>     #> 3 <split [343/86]> Fold3 <tibble [1 × 4]> <tibble [0 × 3]> <tibble>     #> 4 <split [343/86]> Fold4 <tibble [1 × 4]> <tibble [0 × 3]> <tibble>     #> 5 <split [344/85]> Fold5 <tibble [1 × 4]> <tibble [0 × 3]> <tibble> # create a model definition svm_spec <-    svm_rbf(     cost = tune(\"cost\"),      rbf_sigma = tune(\"sigma\")   ) %>%   set_engine(\"kernlab\") %>%   set_mode(\"regression\")  # extend the recipe svm_rec <-   tree_frogs_rec %>%   step_dummy(all_nominal()) %>%   step_zv(all_predictors(), skip = TRUE) %>%   step_meanimpute(all_numeric(), skip = TRUE) %>%   step_corr(all_predictors(), skip = TRUE) %>%   step_normalize(all_numeric(), skip = TRUE)  # add both to a workflow svm_wflow <-    workflow() %>%    add_model(svm_spec) %>%   add_recipe(svm_rec)  # tune cost and sigma and fit to the 5-fold cv set.seed(2020) svm_res <-    tune_grid(     svm_wflow,      resamples = folds,      grid = 6,     metrics = metric,     control = ctrl_grid   )  svm_res #> # Tuning results #> # 5-fold cross-validation  #> # A tibble: 5 × 5 #>   splits           id    .metrics         .notes           .predictions #>   <list>           <chr> <list>           <list>           <list>       #> 1 <split [343/86]> Fold1 <tibble [6 × 6]> <tibble [0 × 3]> <tibble>     #> 2 <split [343/86]> Fold2 <tibble [6 × 6]> <tibble [0 × 3]> <tibble>     #> 3 <split [343/86]> Fold3 <tibble [6 × 6]> <tibble [0 × 3]> <tibble>     #> 4 <split [343/86]> Fold4 <tibble [6 × 6]> <tibble [0 × 3]> <tibble>     #> 5 <split [344/85]> Fold5 <tibble [6 × 6]> <tibble [0 × 3]> <tibble>"},{"path":"https://stacks.tidymodels.org/articles/basics.html","id":"putting-together-a-stack","dir":"Articles","previous_headings":"","what":"Putting together a stack","title":"Getting Started With stacks","text":"first step building ensemble stacks create data_stack object—package, data stacks tibbles (extra attributes) contain assessment set predictions candidate ensemble member.  can initialize data stack using stacks() function. stacks() function works sort like ggplot() constructor ggplot2—function creates basic structure object built top —except ’ll pipe outputs rather adding +. add_candidates() function adds ensemble members stack. mentioned , hood, data_stack object really just tibble extra attributes. Checking actual data: first column gives first response value, remaining columns give assessment set predictions ensemble member. Since ’re regression case, ’s one column per ensemble member. classification settings, many columns levels outcome variable per candidate ensemble member. ’s ! ’re now ready evaluate need combine predictions candidate ensemble member.","code":"stacks() #> # A data stack with 0 model definitions and 0 candidate members. tree_frogs_data_st <-    stacks() %>%   add_candidates(knn_res) %>%   add_candidates(lin_reg_res) %>%   add_candidates(svm_res)  tree_frogs_data_st #> # A data stack with 3 model definitions and 11 candidate members: #> #   knn_res: 4 model configurations #> #   lin_reg_res: 1 model configuration #> #   svm_res: 6 model configurations #> # Outcome: latency (numeric) as_tibble(tree_frogs_data_st) #> # A tibble: 429 × 12 #>    latency knn_res_1_1 knn_res_1_2 knn_res_1_3 knn_res_1_4 lin_reg_res_1_1 #>      <dbl>       <dbl>       <dbl>       <dbl>       <dbl>           <dbl> #>  1     142      -0.496      -0.478      -0.492      -0.494           114.  #>  2      79      -0.381      -0.446      -0.542      -0.553            78.6 #>  3      50      -0.311      -0.352      -0.431      -0.438            81.5 #>  4      68      -0.312      -0.368      -0.463      -0.473            78.6 #>  5      64      -0.496      -0.478      -0.492      -0.494            36.5 #>  6      52      -0.391      -0.412      -0.473      -0.482           124.  #>  7      39      -0.523      -0.549      -0.581      -0.587            35.2 #>  8      46      -0.523      -0.549      -0.581      -0.587            37.1 #>  9     137      -0.287      -0.352      -0.447      -0.456            78.8 #> 10      73      -0.523      -0.549      -0.581      -0.587            38.8 #> # … with 419 more rows, and 6 more variables: svm_res_1_1 <dbl>, #> #   svm_res_1_4 <dbl>, svm_res_1_3 <dbl>, svm_res_1_5 <dbl>, #> #   svm_res_1_2 <dbl>, svm_res_1_6 <dbl>"},{"path":"https://stacks.tidymodels.org/articles/basics.html","id":"fit-the-stack","dir":"Articles","previous_headings":"","what":"Fit the stack","title":"Getting Started With stacks","text":"outputs candidate ensemble members highly correlated, blend_predictions() function performs regularization figure can combine outputs stack members come final prediction. blend_predictions function determines member model output ultimately combined final prediction fitting LASSO model data stack, predicting true assessment set outcome using predictions candidate members. Candidates nonzero stacking coefficients become members.  make sure right trade-minimizing number members optimizing performance, can use autoplot() method:  show relationship directly:  results good enough, blend_predictions() called different values penalty. , blend_predictions() picks penalty parameter numerically optimal results. see top results:  Now know combine model output, can fit candidates non-zero stacking coefficients full training set.  Model stacks can thought group fitted member models set instructions combine predictions.  identify model configurations assigned stacking coefficients, can make use collect_parameters() function: object now ready predict new data! Juxtaposing predictions true data:  Looks like predictions pretty strong! stacks predictions perform, though, compared members’ predictions? can use type = \"members\" argument generate predictions ensemble members. Now, evaluating root mean squared error model: can see, stacked ensemble outperforms member models, though closely followed one members. Voila! ’ve now made use stacks package predict red-eyed tree frog embryo hatching using stacked ensemble! full visual outline steps can found .","code":"tree_frogs_model_st <-   tree_frogs_data_st %>%   blend_predictions() theme_set(theme_bw()) autoplot(tree_frogs_model_st) autoplot(tree_frogs_model_st, type = \"members\") autoplot(tree_frogs_model_st, type = \"weights\") tree_frogs_model_st <-   tree_frogs_model_st %>%   fit_members() collect_parameters(tree_frogs_model_st, \"svm_res\") #> # A tibble: 6 × 4 #>   member         cost    sigma  coef #>   <chr>         <dbl>    <dbl> <dbl> #> 1 svm_res_1_1 0.00143 6.64e- 9   0   #> 2 svm_res_1_2 3.59    3.95e- 4  26.8 #> 3 svm_res_1_3 0.0978  1.81e- 2   0   #> 4 svm_res_1_4 0.00849 2.16e-10   0   #> 5 svm_res_1_5 0.256   4.54e- 1   0   #> 6 svm_res_1_6 7.64    3.16e- 7 352. tree_frogs_test <-    tree_frogs_test %>%   bind_cols(predict(tree_frogs_model_st, .)) ggplot(tree_frogs_test) +   aes(x = latency,        y = .pred) +   geom_point() +    coord_obs_pred() member_preds <-    tree_frogs_test %>%   select(latency) %>%   bind_cols(predict(tree_frogs_model_st, tree_frogs_test, members = TRUE)) map_dfr(member_preds, rmse, truth = latency, data = member_preds) %>%   mutate(member = colnames(member_preds)) #> # A tibble: 6 × 4 #>   .metric .estimator .estimate member          #>   <chr>   <chr>          <dbl> <chr>           #> 1 rmse    standard         0   latency         #> 2 rmse    standard        55.3 .pred           #> 3 rmse    standard       114.  knn_res_1_4     #> 4 rmse    standard        55.5 lin_reg_res_1_1 #> 5 rmse    standard       114.  svm_res_1_2     #> 6 rmse    standard       114.  svm_res_1_6"},{"path":"https://stacks.tidymodels.org/articles/classification.html","id":"defining-candidate-ensemble-members","dir":"Articles","previous_headings":"","what":"Defining candidate ensemble members","title":"Classification Models With stacks","text":"numeric prediction setting, defining candidate ensemble members undoubtedly longest part ensembling process stacks. First, splitting training data, generating resamples, setting options used model definition. also need use control settings numeric response setting: ’ll define two different model definitions try predict reflex—random forest neural network. Starting random forest: Now, moving neural network model definition: model definitions fully specified, ’re ready start putting together ensemble!","code":"# some setup: resampling and a basic recipe set.seed(1)  tree_frogs_split <- initial_split(tree_frogs) tree_frogs_train <- training(tree_frogs_split) tree_frogs_test  <- testing(tree_frogs_split)  folds <- rsample::vfold_cv(tree_frogs_train, v = 5)  tree_frogs_rec <-    recipe(reflex ~ ., data = tree_frogs_train) %>%   step_dummy(all_nominal(), -reflex) %>%   step_zv(all_predictors())  tree_frogs_wflow <-    workflow() %>%    add_recipe(tree_frogs_rec) ctrl_grid <- control_stack_grid() rand_forest_spec <-    rand_forest(     mtry = tune(),     min_n = tune(),     trees = 500   ) %>%   set_mode(\"classification\") %>%   set_engine(\"ranger\")  rand_forest_wflow <-   tree_frogs_wflow %>%   add_model(rand_forest_spec)  rand_forest_res <-    tune_grid(     object = rand_forest_wflow,      resamples = folds,      grid = 10,     control = ctrl_grid   ) nnet_spec <-   mlp(hidden_units = tune(), penalty = tune(), epochs = tune()) %>%   set_mode(\"classification\") %>%   set_engine(\"nnet\")  nnet_rec <-    tree_frogs_rec %>%    step_normalize(all_predictors())  nnet_wflow <-    tree_frogs_wflow %>%   add_model(nnet_spec)  nnet_res <-   tune_grid(     object = nnet_wflow,      resamples = folds,      grid = 10,     control = ctrl_grid   )"},{"path":"https://stacks.tidymodels.org/articles/classification.html","id":"putting-together-a-stack","dir":"Articles","previous_headings":"","what":"Putting together a stack","title":"Classification Models With stacks","text":"Building stacked ensemble, now, takes lines: make sure right trade-minimizing number members optimizing performance, can use autoplot() method:  show relationship directly:  results good enough, blend_predictions() called different values penalty. , blend_predictions() picks penalty parameter numerically optimal results. see top results:  multiple facets since ensemble members can different effects different classes. identify model configurations assigned stacking coefficients, can make use collect_parameters() function: object now ready predict new data! Computing ROC AUC model: Looks like predictions pretty strong! stacks predictions perform, though, compared members’ predictions? can use members argument generate predictions ensemble members. Voilà! ’ve now made use stacks package predict tree frog embryo ear function using stacked ensemble!","code":"tree_frogs_model_st <-    # initialize the stack   stacks() %>%   # add candidate members   add_candidates(rand_forest_res) %>%   add_candidates(nnet_res) %>%   # determine how to combine their predictions   blend_predictions() %>%   # fit the candidates with nonzero stacking coefficients   fit_members()  tree_frogs_model_st #> # A tibble: 10 × 4 #>    member                          type        weight class #>    <chr>                           <chr>        <dbl> <chr> #>  1 .pred_full_nnet_res_1_09        mlp          142.  low   #>  2 .pred_mid_nnet_res_1_05         mlp           49.8 low   #>  3 .pred_mid_nnet_res_1_06         mlp           40.7 low   #>  4 .pred_mid_rand_forest_res_1_01  rand_forest   39.9 low   #>  5 .pred_mid_nnet_res_1_01         mlp           30.9 low   #>  6 .pred_mid_rand_forest_res_1_10  rand_forest   26.7 mid   #>  7 .pred_mid_rand_forest_res_1_07  rand_forest   23.4 low   #>  8 .pred_mid_rand_forest_res_1_05  rand_forest   23.1 mid   #>  9 .pred_full_rand_forest_res_1_09 rand_forest   14.4 full  #> 10 .pred_mid_rand_forest_res_1_09  rand_forest   13.7 mid theme_set(theme_bw()) autoplot(tree_frogs_model_st) autoplot(tree_frogs_model_st, type = \"members\") autoplot(tree_frogs_model_st, type = \"weights\") collect_parameters(tree_frogs_model_st, \"rand_forest_res\") #> # A tibble: 60 × 6 #>    member                mtry min_n class terms                       coef #>    <chr>                <int> <int> <chr> <chr>                      <dbl> #>  1 rand_forest_res_1_01     1    26 low   .pred_mid_rand_forest_r… 3.99e+1 #>  2 rand_forest_res_1_01     1    26 low   .pred_full_rand_forest_… 4.55e-3 #>  3 rand_forest_res_1_01     1    26 mid   .pred_mid_rand_forest_r… 0       #>  4 rand_forest_res_1_01     1    26 mid   .pred_full_rand_forest_… 1.06e-1 #>  5 rand_forest_res_1_01     1    26 full  .pred_mid_rand_forest_r… 0       #>  6 rand_forest_res_1_01     1    26 full  .pred_full_rand_forest_… 0       #>  7 rand_forest_res_1_02     2    33 low   .pred_mid_rand_forest_r… 0       #>  8 rand_forest_res_1_02     2    33 low   .pred_full_rand_forest_… 0       #>  9 rand_forest_res_1_02     2    33 mid   .pred_mid_rand_forest_r… 5.87e+0 #> 10 rand_forest_res_1_02     2    33 mid   .pred_full_rand_forest_… 5.66e+0 #> # … with 50 more rows tree_frogs_pred <-   tree_frogs_test %>%   bind_cols(predict(tree_frogs_model_st, ., type = \"prob\")) yardstick::roc_auc(   tree_frogs_pred,   truth = reflex,   contains(\".pred_\")   ) tree_frogs_pred <-   tree_frogs_test %>%   select(reflex) %>%   bind_cols(     predict(       tree_frogs_model_st,       tree_frogs_test,       type = \"class\",       members = TRUE       )     )  tree_frogs_pred #> # A tibble: 303 × 21 #>    reflex .pred_class .pred_class_rand_… .pred_class_ran… .pred_class_ran… #>    <fct>  <fct>       <fct>              <fct>            <fct>            #>  1 full   low         full               full             full             #>  2 mid    full        low                mid              mid              #>  3 mid    full        mid                mid              mid              #>  4 mid    full        low                low              low              #>  5 full   low         full               full             full             #>  6 full   low         full               full             full             #>  7 full   low         full               full             full             #>  8 full   low         full               full             full             #>  9 full   low         full               full             full             #> 10 full   low         full               full             full             #> # … with 293 more rows, and 16 more variables: #> #   .pred_class_rand_forest_res_1_05 <fct>, #> #   .pred_class_rand_forest_res_1_09 <fct>, #> #   .pred_class_nnet_res_1_05 <fct>, .pred_class_nnet_res_1_06 <fct>, #> #   .pred_class_nnet_res_1_04 <fct>, .pred_class_nnet_res_1_10 <fct>, #> #   .pred_class_nnet_res_1_01 <fct>, .pred_class_nnet_res_1_09 <fct>, #> #   .pred_class_rand_forest_res_1_10 <fct>, …  map_dfr(   setNames(colnames(tree_frogs_pred), colnames(tree_frogs_pred)),   ~mean(tree_frogs_pred$reflex == pull(tree_frogs_pred, .x)) ) %>%   pivot_longer(c(everything(), -reflex)) #> # A tibble: 20 × 3 #>    reflex name                              value #>     <dbl> <chr>                             <dbl> #>  1      1 .pred_class                      0.0627 #>  2      1 .pred_class_rand_forest_res_1_01 0.835  #>  3      1 .pred_class_rand_forest_res_1_04 0.875  #>  4      1 .pred_class_rand_forest_res_1_07 0.871  #>  5      1 .pred_class_rand_forest_res_1_05 0.845  #>  6      1 .pred_class_rand_forest_res_1_09 0.884  #>  7      1 .pred_class_nnet_res_1_05        0.558  #>  8      1 .pred_class_nnet_res_1_06        0.558  #>  9      1 .pred_class_nnet_res_1_04        0.558  #> 10      1 .pred_class_nnet_res_1_10        0.842  #> 11      1 .pred_class_nnet_res_1_01        0.558  #> 12      1 .pred_class_nnet_res_1_09        0.558  #> 13      1 .pred_class_rand_forest_res_1_10 0.868  #> 14      1 .pred_class_rand_forest_res_1_02 0.878  #> 15      1 .pred_class_rand_forest_res_1_06 0.878  #> 16      1 .pred_class_rand_forest_res_1_08 0.881  #> 17      1 .pred_class_nnet_res_1_08        0.558  #> 18      1 .pred_class_nnet_res_1_07        0.558  #> 19      1 .pred_class_nnet_res_1_02        0.558  #> 20      1 .pred_class_nnet_res_1_03        0.558"},{"path":"https://stacks.tidymodels.org/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Simon Couch. Author, maintainer. Max Kuhn. Author. . Copyright holder, funder.","code":""},{"path":"https://stacks.tidymodels.org/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Couch S, Kuhn M (2022). stacks: Tidy Model Stacking. https://stacks.tidymodels.org/, https://github.com/tidymodels/stacks.","code":"@Manual{,   title = {stacks: Tidy Model Stacking},   author = {Simon Couch and Max Kuhn},   year = {2022},   note = {https://stacks.tidymodels.org/, https://github.com/tidymodels/stacks}, }"},{"path":"https://stacks.tidymodels.org/index.html","id":"stacks---tidy-model-stacking-","dir":"","previous_headings":"","what":"stacks - tidy model stacking","title":"Tidy Model Stacking","text":"stacks R package model stacking aligns tidymodels. Model stacking ensembling method takes outputs many models combines generate new model—referred ensemble package—generates predictions informed members. process goes something like : Define candidate ensemble members using functionality rsample, parsnip, workflows, recipes, tune Initialize data_stack object stacks() Iteratively add candidate ensemble members data_stack add_candidates() Evaluate combine predictions blend_predictions() Fit candidate ensemble members non-zero stacking coefficients fit_members() Predict new data predict() can install package following code: Install development version : stacks generalized respect : Model type: model type implemented parsnip extension packages fair game add stacks model stack. ’s table many implemented model types tidymodels core, link article implementing model classes well. Cross-validation scheme: resampling algorithm implemented rsample extension packages fair game resampling data use training model stack. Error metric: metric function implemented yardstick extension packages fair game evaluating model stacks members. package provides infrastructure creating metric functions well! stacks uses regularized linear model combine predictions ensemble members, though model type one many possible learning algorithms used fit stacked ensemble model. implementations additional ensemble learning algorithms, check h2o SuperLearner. Rather diving right implementation, ’ll focus pieces fit together, conceptually, building ensemble stacks. See basics vignette example API action!","code":"install.packages(\"stacks\") remotes::install_github(\"tidymodels/stacks\", ref = \"main\")"},{"path":"https://stacks.tidymodels.org/index.html","id":"a-grammar","dir":"","previous_headings":"","what":"a grammar","title":"Tidy Model Stacking","text":"highest level, ensembles formed model definitions. package, model definitions instance minimal workflow, containing model specification (defined parsnip package) , optionally, preprocessor (defined recipes package). Model definitions specify form candidate ensemble members. diagram representing “model definitions,” specify form candidate ensemble members. Three colored boxes represent three different model types; K-nearest neighbors model (salmon), linear regression model (yellow), support vector machine model (green). used ensemble, model definitions must share resample. rsample rset object, paired model definitions, can used generate tuning/fitting results objects candidate ensemble members tune. diagram representing “candidate members” generated model definition. Four salmon-colored boxes labeled “KNN” represent K-nearest neighbors models trained resamples differing hyperparameters. Similarly, linear regression model generates one candidate member, support vector machine model generates six. Candidate members first come together data_stack object add_candidates() function. Principally, objects just tibbles, first column gives true outcome assessment set (portion training set used model validation), remaining columns give predictions candidate ensemble member. (outcome numeric, ’s one column per candidate ensemble member. Classification requires many columns per candidate levels outcome variable.) also bring along extra attributes keep track model definitions. diagram representing “data stack,” specific kind data frame. Colored “columns” depict, white, true value outcome variable validation set, followed four columns (salmon) representing predictions K-nearest neighbors model, one column (tan) representing linear regression model, six (green) representing support vector machine model. , data stack can evaluated using blend_predictions() determine best combine outputs candidate members. stacking literature, process commonly called metalearning. outputs member likely highly correlated. Thus, depending degree regularization choose, coefficients inputs (possibly) many members zero —predictions influence final output, terms thus thrown . diagram representing “stacking coefficients,” coefficients linear model combining candidate member predictions generate ensemble’s ultimate prediction. Boxes candidate members placed besides , filled color coefficient associated candidate member nonzero. stacking coefficients determine candidate ensemble members become ensemble members. Candidates non-zero stacking coefficients fitted whole training set, altogether making model_stack object. diagram representing “model stack” class, collates stacking coefficients members (candidate members nonzero stacking coefficients trained full training set). representation stacking coefficients , members (shown next associated stacking coefficients) colored-pentagons. Model stacks list subclass. model stack object, outputted fit_members(), ready predict new data! trained ensemble members often referred base models stacking literature. full visual outline steps can found . API package closely mirrors ideas. See basics vignette example grammar implemented!","code":""},{"path":"https://stacks.tidymodels.org/index.html","id":"contributing","dir":"","previous_headings":"","what":"contributing","title":"Tidy Model Stacking","text":"project released Contributor Code Conduct. contributing project, agree abide terms. questions discussions tidymodels packages, modeling, machine learning, please post RStudio Community. think encountered bug, please submit issue. Either way, learn create share reprex (minimal, reproducible example), clearly communicate code. Check details contributing guidelines tidymodels packages get help. stacks package, test objects take long build every commit. contribution changes structure data_stack model_stacks objects, please regenerate test objects running scripts man-roxygen/example_models.Rmd, including chunk options eval = FALSE.","code":""},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":null,"dir":"Reference","previous_headings":"","what":"Add model definitions to a data stack — add_candidates","title":"Add model definitions to a data stack — add_candidates","text":"add_candidates() collates assessment set predictions additional attributes supplied model definition (.e. set \"candidates\") data stack. Behind scenes, data stack objects just tibble::tbl_dfs, first column gives true response values, remaining columns give assessment set predictions candidate. regression setting, one column per ensemble member. classification settings, many columns per candidate ensemble member levels outcome variable. initialize data stack, use stacks() function. Model definitions appended data stack iteratively using several calls add_candidates(). Data stacks evaluated using blend_predictions() function.","code":""},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add model definitions to a data stack — add_candidates","text":"","code":"add_candidates(   data_stack,   candidates,   name = deparse(substitute(candidates)),   ... )"},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add model definitions to a data stack — add_candidates","text":"data_stack data_stack object. candidates model definition: either tune_results resample_results object outputted tune::tune_grid(), tune::tune_bayes(), tune::fit_resamples(). results must fitted control settings save_pred = TRUE, save_workflow = TRUE—see control_stack_grid(), control_stack_bayes(), control_stack_resamples() documentation helper functions. name label model definition---defaults name candidates object. ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add model definitions to a data stack — add_candidates","text":"data_stack object--see stacks() details!","code":""},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":"example-data","dir":"Reference","previous_headings":"","what":"Example Data","title":"Add model definitions to a data stack — add_candidates","text":"package provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos! Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. See ?example_data learn objects, well browse source code generated .","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/add_candidates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add model definitions to a data stack — add_candidates","text":"","code":"# \\donttest{ # see the \"Example Data\" section above for # clarification on the objects used in these examples!  # put together a data stack using # tuning results for regression models reg_st <-    stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_svm) %>%   add_candidates(reg_res_sp)    reg_st #> # A data stack with 3 model definitions and 16 candidate members: #> #   reg_res_lr: 1 model configuration #> #   reg_res_svm: 5 model configurations #> #   reg_res_sp: 10 model configurations #> # Outcome: latency (numeric)    # do the same with multinomial classification models class_st <-   stacks() %>%   add_candidates(class_res_nn) %>%   add_candidates(class_res_rf) #> Warning: Predictions from 1 candidate were identical to those from existing candidates and were removed from the data stack.    class_st #> # A data stack with 2 model definitions and 10.6666666666667 candidate members: #> #   class_res_nn: 1 model configuration #> #   class_res_rf: 9.66666666666667 model configurations #> # Outcome: reflex (factor)    # ...or binomial classification models log_st <-   stacks() %>%   add_candidates(log_res_nn) %>%   add_candidates(log_res_rf)    log_st #> # A data stack with 2 model definitions and 11 candidate members: #> #   log_res_nn: 1 model configuration #> #   log_res_rf: 10 model configurations #> # Outcome: hatched (factor)    # use custom names for each model: log_st2 <-   stacks() %>%   add_candidates(log_res_nn, name = \"neural_network\") %>%   add_candidates(log_res_rf, name = \"random_forest\")    log_st2 #> # A data stack with 2 model definitions and 11 candidate members: #> #   neural_network: 1 model configuration #> #   random_forest: 10 model configurations #> # Outcome: hatched (factor)    # these objects would likely then be # passed to blend_predictions(): log_st2 %>% blend_predictions() #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 11 possible candidate members, the ensemble retained 3. #> Penalty: 1e-04. #> Mixture: 1. #>  #> The 3 highest weighted member classes are: #> # A tibble: 3 × 3 #>   member                       type        weight #>   <chr>                        <chr>        <dbl> #> 1 .pred_yes_neural_network_1_1 mlp          7.45  #> 2 .pred_yes_random_forest_1_05 rand_forest  3.33  #> 3 .pred_yes_random_forest_1_09 rand_forest  0.153 #>  #> Members have not yet been fitted with `fit_members()`. # }"},{"path":"https://stacks.tidymodels.org/reference/autoplot.linear_stack.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot results of a stacked ensemble model. — autoplot.linear_stack","title":"Plot results of a stacked ensemble model. — autoplot.linear_stack","text":"Plot results stacked ensemble model.","code":""},{"path":"https://stacks.tidymodels.org/reference/autoplot.linear_stack.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot results of a stacked ensemble model. — autoplot.linear_stack","text":"","code":"# S3 method for linear_stack autoplot(object, type = \"performance\", n = Inf, ...)"},{"path":"https://stacks.tidymodels.org/reference/autoplot.linear_stack.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot results of a stacked ensemble model. — autoplot.linear_stack","text":"object linear_stack object outputted blend_predictions() fit_members(). type single character string plot type values \"performance\", \"members\", \"weights\". n integer many members weights plot type = \"weights\". multi-class data, total number weights across classes; otherwise equal number members. ... currently used.","code":""},{"path":"https://stacks.tidymodels.org/reference/autoplot.linear_stack.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot results of a stacked ensemble model. — autoplot.linear_stack","text":"ggplot object.","code":""},{"path":"https://stacks.tidymodels.org/reference/autoplot.linear_stack.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot results of a stacked ensemble model. — autoplot.linear_stack","text":"\"performance\" plot shows relationship lasso penalty resampled performance metrics. latter includes average number ensemble members. plot can helpful understanding penalty values reasonable. \"members\" plot shows relationship average number ensemble members performance metrics. point different penalty value. Neither \"performance\" \"members\" plots helpful single penalty used. \"weights\" plot shows blending weights top ensemble members. results final penalty value used fit ensemble.","code":""},{"path":"https://stacks.tidymodels.org/reference/axe_model_stack.html","id":null,"dir":"Reference","previous_headings":"","what":"Axing a model_stack. — axe_model_stack","title":"Axing a model_stack. — axe_model_stack","text":"Axing model_stack. Remove call. Remove controls used training. Remove training data. Remove environments. Remove fitted values.","code":""},{"path":"https://stacks.tidymodels.org/reference/axe_model_stack.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Axing a model_stack. — axe_model_stack","text":"","code":"# S3 method for model_stack axe_call(x, verbose = FALSE, ...)  # S3 method for model_stack axe_ctrl(x, verbose = FALSE, ...)  # S3 method for model_stack axe_data(x, verbose = FALSE, ...)  # S3 method for model_stack axe_env(x, verbose = FALSE, ...)  # S3 method for model_stack axe_fitted(x, verbose = FALSE, ...)"},{"path":"https://stacks.tidymodels.org/reference/axe_model_stack.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Axing a model_stack. — axe_model_stack","text":"x model object verbose Print information time axe method executed. Notes much memory released functions disabled. Default FALSE. ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/axe_model_stack.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Axing a model_stack. — axe_model_stack","text":"Axed model_stack object.","code":""},{"path":"https://stacks.tidymodels.org/reference/axe_model_stack.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Axing a model_stack. — axe_model_stack","text":"","code":"# \\donttest{  # build a regression model stack st <-   stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_sp) %>%   blend_predictions() %>%   fit_members()    # remove any of the \"butcherable\" # elements individually axe_call(st) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Print methods for butchered model stacks are disabled. axe_ctrl(st) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Print methods for butchered model stacks are disabled. axe_data(st) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Print methods for butchered model stacks are disabled. axe_fitted(st) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Print methods for butchered model stacks are disabled. axe_env(st) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Print methods for butchered model stacks are disabled.  # or do it all at once! butchered_st <- butcher(st, verbose = TRUE) #> ✔ Memory released: '2,029,544 B' #> ✖ Disabled: `print()`, `summary()`  format(object.size(st)) #> [1] \"11061880 bytes\" format(object.size(butchered_st)) #> [1] \"5744568 bytes\"  # }"},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine stacking coefficients from a data stack — blend_predictions","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"Evaluates data stack fitting regularized model assessment predictions candidate member predict true outcome. process determines \"stacking coefficients\" model stack. stacking coefficients used weight predictions candidate (represented unique column data stack), given betas LASSO model fitting true outcome predictions given remaining columns data stack. Candidates non-zero stacking coefficients model stack members, need trained full training set (rather just assessment set) fit_members(). function typically used number calls add_candidates().","code":""},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"","code":"blend_predictions(   data_stack,   penalty = 10^(-6:-1),   mixture = 1,   non_negative = TRUE,   metric = NULL,   control = tune::control_grid(),   times = 25,   ... )"},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"data_stack data_stack object penalty numeric vector proposed values total amount regularization used member weighting. Higher penalties generally result fewer members included resulting model stack, vice versa. package tune grid formed cross product penalty mixture arguments. mixture number zero one (inclusive) giving proportion L1 regularization (.e. lasso) model. mixture = 1 indicates pure lasso model, mixture = 0 indicates ridge regression, values (0, 1) indicate elastic net. package tune grid formed cross product penalty mixture arguments. non_negative logical giving whether restrict stacking coefficients non-negative values. TRUE (default), 0 passed lower.limits argument glmnet::glmnet() fitting model data stack. Otherwise, -Inf. metric call yardstick::metric_set(). metric(s) use tuning lasso penalty stacking coefficients. Default values determined tune::tune_grid() outcome class. control object inheriting control_grid passed model determining stacking coefficients. See tune::control_grid() documentation details possible values. Note extract entry overwritten internally. times Number bootstrap samples tuned model determines stacking coefficients. See rsample::bootstraps() learn . ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"model_stack object—model_stacks largely contain elements data_stacks, primary data objects shift assessment set predictions member models.","code":""},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"Note regularized linear model one many possible learning algorithms used fit stacked ensemble model. implementations additional ensemble learning algorithms, see h2o::h2o.stackedEnsemble() SuperLearner::SuperLearner().","code":""},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"example-data","dir":"Reference","previous_headings":"","what":"Example Data","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"package provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos! Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. See ?example_data learn objects, well browse source code generated .","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/blend_predictions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Determine stacking coefficients from a data stack — blend_predictions","text":"","code":"# \\donttest{ # see the \"Example Data\" section above for # clarification on the objects used in these examples!  # put together a data stack reg_st <-    stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_svm) %>%   add_candidates(reg_res_sp)    reg_st #> # A data stack with 3 model definitions and 16 candidate members: #> #   reg_res_lr: 1 model configuration #> #   reg_res_svm: 5 model configurations #> #   reg_res_sp: 10 model configurations #> # Outcome: latency (numeric)  # evaluate the data stack reg_st %>%   blend_predictions() #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 1e-06. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.722    #> 2 reg_res_sp_03_1 linear_reg 0.478    #> 3 reg_res_sp_10_1 linear_reg 0.000716 #>  #> Members have not yet been fitted with `fit_members()`.  # include fewer models by proposing higher penalties reg_st %>%    blend_predictions(penalty = c(.5, 1)) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 0.5. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.716    #> 2 reg_res_sp_03_1 linear_reg 0.471    #> 3 reg_res_sp_10_1 linear_reg 0.000176 #>  #> Members have not yet been fitted with `fit_members()`.  # allow for negative stacking coefficients  # with the non_negative argument reg_st %>%    blend_predictions(non_negative = FALSE) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 12. #> Penalty: 0.1. #> Mixture: 1. #>  #> The 10 highest weighted members are: #> # A tibble: 10 × 3 #>    member          type        weight #>    <chr>           <chr>        <dbl> #>  1 reg_res_svm_1_1 svm_rbf    -10.8   #>  2 reg_res_sp_05_1 linear_reg   1.36  #>  3 reg_res_sp_04_1 linear_reg  -1.34  #>  4 reg_res_svm_1_3 svm_rbf      1.26  #>  5 reg_res_svm_1_2 svm_rbf     -0.975 #>  6 reg_res_sp_03_1 linear_reg   0.633 #>  7 reg_res_sp_01_1 linear_reg  -0.419 #>  8 reg_res_sp_10_1 linear_reg   0.260 #>  9 reg_res_sp_06_1 linear_reg   0.212 #> 10 reg_res_lr_1_1  linear_reg   0.181 #>  #> Members have not yet been fitted with `fit_members()`.    # use a custom metric in tuning the lasso penalty library(yardstick) #> For binary classification, the first factor level is assumed to be the event. #> Use the argument `event_level = \"second\"` to alter this as needed. reg_st %>%    blend_predictions(metric = metric_set(rmse)) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 1e-06. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.722    #> 2 reg_res_sp_03_1 linear_reg 0.478    #> 3 reg_res_sp_10_1 linear_reg 0.000716 #>  #> Members have not yet been fitted with `fit_members()`.    # pass control options for stack blending reg_st %>%    blend_predictions(     control = tune::control_grid(allow_par = TRUE)   ) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 1e-06. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.722    #> 2 reg_res_sp_03_1 linear_reg 0.478    #> 3 reg_res_sp_10_1 linear_reg 0.000716 #>  #> Members have not yet been fitted with `fit_members()`.   # to speed up the stacking process for preliminary # results, bump down the `times` argument: reg_st %>%    blend_predictions(times = 5) #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 0.1. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.721    #> 2 reg_res_sp_03_1 linear_reg 0.476    #> 3 reg_res_sp_10_1 linear_reg 0.000367 #>  #> Members have not yet been fitted with `fit_members()`.    # the process looks the same with  # multinomial classification models class_st <-   stacks() %>%   add_candidates(class_res_nn) %>%   add_candidates(class_res_rf) %>%   blend_predictions() #> Warning: Predictions from 1 candidate were identical to those from existing candidates and were removed from the data stack. #> ! Bootstrap03: preprocessor 1/1, model 1/1: from glmnet C++ code (error code -70)...    class_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 21 possible candidate members, the ensemble retained 6. #> Penalty: 0.1. #> Mixture: 1. #> Across the 3 classes, there are an average of 3 coefficients per class. #>  #> The 6 highest weighted member classes are: #> # A tibble: 6 × 4 #>   member                       type        weight class #>   <chr>                        <chr>        <dbl> <chr> #> 1 .pred_full_class_res_rf_1_05 rand_forest 3.05   full  #> 2 .pred_full_class_res_rf_1_07 rand_forest 0.921  full  #> 3 .pred_mid_class_res_rf_1_06  rand_forest 0.673  mid   #> 4 .pred_full_class_res_rf_1_01 rand_forest 0.248  full  #> 5 .pred_full_class_res_rf_1_06 rand_forest 0.0403 full  #> 6 .pred_full_class_res_rf_1_04 rand_forest 0.0227 full  #>  #> Members have not yet been fitted with `fit_members()`.  # ...or binomial classification models log_st <-   stacks() %>%   add_candidates(log_res_nn) %>%   add_candidates(log_res_rf) %>%   blend_predictions()    log_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 11 possible candidate members, the ensemble retained 3. #> Penalty: 1e-05. #> Mixture: 1. #>  #> The 3 highest weighted member classes are: #> # A tibble: 3 × 3 #>   member                    type        weight #>   <chr>                     <chr>        <dbl> #> 1 .pred_yes_log_res_nn_1_1  mlp          7.44  #> 2 .pred_yes_log_res_rf_1_05 rand_forest  3.34  #> 3 .pred_yes_log_res_rf_1_09 rand_forest  0.150 #>  #> Members have not yet been fitted with `fit_members()`. # }"},{"path":"https://stacks.tidymodels.org/reference/build_linear_predictor.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates an R expression for a linear predictor from a data frame of terms and\ncoefficients — build_linear_predictor","title":"Creates an R expression for a linear predictor from a data frame of terms and\ncoefficients — build_linear_predictor","text":"Creates R expression linear predictor data frame terms coefficients","code":""},{"path":"https://stacks.tidymodels.org/reference/build_linear_predictor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates an R expression for a linear predictor from a data frame of terms and\ncoefficients — build_linear_predictor","text":"","code":"build_linear_predictor(x, ...)  # S3 method for `_elnet` build_linear_predictor(x, ...)  # S3 method for `_lognet` build_linear_predictor(x, ...)  # S3 method for `_multnet` build_linear_predictor(x, ...)"},{"path":"https://stacks.tidymodels.org/reference/build_linear_predictor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates an R expression for a linear predictor from a data frame of terms and\ncoefficients — build_linear_predictor","text":"x object uses glmnet::glmnet() model numeric predictors. ... currently used.","code":""},{"path":"https://stacks.tidymodels.org/reference/build_linear_predictor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates an R expression for a linear predictor from a data frame of terms and\ncoefficients — build_linear_predictor","text":"R expression list R expressions, depending type model used.","code":""},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect candidate parameters and stacking coefficients — collect_parameters","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"function help situate candidates within stack. Takes data stack model stack candidate name returns tibble mapping candidate/member names hyperparameters (, model stack, stacking coefficients well).","code":""},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"","code":"collect_parameters(stack, candidates, ...)  # S3 method for default collect_parameters(stack, candidates, ...)  # S3 method for data_stack collect_parameters(stack, candidates, ...)  # S3 method for model_stack collect_parameters(stack, candidates, ...)"},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"stack data_stack model_stack object. candidates name candidates collect parameters . either name argument supplied add_candidates() , supplied, name object supplied candidates argument add_candidates(). ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"tibble::tbl_df information member names hyperparameters.","code":""},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":"example-data","dir":"Reference","previous_headings":"","what":"Example Data","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"package provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos! Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. See ?example_data learn objects, well browse source code generated .","code":""},{"path":"https://stacks.tidymodels.org/reference/collect_parameters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collect candidate parameters and stacking coefficients — collect_parameters","text":"","code":"# \\donttest{ # see the \"Example Data\" section above for # clarification on the objects used in these examples!  # put together a data stack using # tuning results for regression models reg_st <-    stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_svm) %>%   add_candidates(reg_res_sp, \"spline\")    reg_st #> # A data stack with 3 model definitions and 16 candidate members: #> #   reg_res_lr: 1 model configuration #> #   reg_res_svm: 5 model configurations #> #   spline: 10 model configurations #> # Outcome: latency (numeric)    # check out the hyperparameters for some of the candidates collect_parameters(reg_st, \"reg_res_svm\") #> # A tibble: 5 × 3 #>   member             cost     rbf_sigma #>   <chr>             <dbl>         <dbl> #> 1 reg_res_svm_1_1 3.09    0.000000465   #> 2 reg_res_svm_1_2 9.56    0.00346       #> 3 reg_res_svm_1_3 0.321   0.0256        #> 4 reg_res_svm_1_4 0.00486 0.00000251    #> 5 reg_res_svm_1_5 0.0146  0.00000000959  collect_parameters(reg_st, \"spline\") #> # A tibble: 10 × 2 #>    member        age #>    <chr>       <int> #>  1 spline_01_1    12 #>  2 spline_02_1     6 #>  3 spline_03_1    15 #>  4 spline_04_1     5 #>  5 spline_05_1     3 #>  6 spline_06_1    13 #>  7 spline_07_1     9 #>  8 spline_08_1    10 #>  9 spline_09_1     7 #> 10 spline_10_1     2  # blend the data stack to view the hyperparameters  # along with the stacking coefficients! collect_parameters(   reg_st %>% blend_predictions(),    \"spline\" ) #> # A tibble: 10 × 3 #>    member        age     coef #>    <chr>       <int>    <dbl> #>  1 spline_01_1    12 0        #>  2 spline_02_1     6 0        #>  3 spline_03_1    15 0.478    #>  4 spline_04_1     5 0        #>  5 spline_05_1     3 0        #>  6 spline_06_1    13 0        #>  7 spline_07_1     9 0        #>  8 spline_08_1    10 0        #>  9 spline_09_1     7 0        #> 10 spline_10_1     2 0.000716 # }"},{"path":"https://stacks.tidymodels.org/reference/control_stack.html","id":null,"dir":"Reference","previous_headings":"","what":"Control wrappers — control_stack_grid","title":"Control wrappers — control_stack_grid","text":"Supply light wrappers control argument tune::tune_grid(), tune::tune_bayes(), tune::fit_resamples() call return needed elements use data stack. functions return appropriate control grid ensure assessment set predictions information model specifications preprocessors, supplied resampling results object! integrate stack settings existing control settings, note functions just call appropriate tune::control_* function arguments save_pred = TRUE, save_workflow = TRUE.","code":""},{"path":"https://stacks.tidymodels.org/reference/control_stack.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Control wrappers — control_stack_grid","text":"","code":"control_stack_grid()  control_stack_resamples()  control_stack_bayes()"},{"path":"https://stacks.tidymodels.org/reference/control_stack.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Control wrappers — control_stack_grid","text":"tune::control_grid, tune::control_bayes, tune::control_resamples object.","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/example_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Objects — example_data","title":"Example Objects — example_data","text":"stacks provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos!","code":""},{"path":"https://stacks.tidymodels.org/reference/example_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example Objects — example_data","text":"","code":"reg_res_svm  reg_res_sp  reg_res_lr  reg_folds  class_res_nn  class_res_rf  class_folds  log_res_nn  log_res_rf"},{"path":"https://stacks.tidymodels.org/reference/example_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Objects — example_data","text":"object class tune_results (inherits tbl_df, tbl, data.frame) 5 rows 5 columns. object class tune_results (inherits tbl_df, tbl, data.frame) 5 rows 5 columns. object class resample_results (inherits tune_results, tbl_df, tbl, data.frame) 5 rows 5 columns. object class vfold_cv (inherits rset, tbl_df, tbl, data.frame) 5 rows 2 columns. object class resample_results (inherits tune_results, tbl_df, tbl, data.frame) 5 rows 5 columns. object class tune_results (inherits tbl_df, tbl, data.frame) 5 rows 5 columns. object class vfold_cv (inherits rset, tbl_df, tbl, data.frame) 5 rows 2 columns. object class resample_results (inherits tune_results, tbl_df, tbl, data.frame) 5 rows 5 columns. object class tune_results (inherits tbl_df, tbl, data.frame) 5 rows 5 columns.","code":""},{"path":"https://stacks.tidymodels.org/reference/example_data.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example Objects — example_data","text":"Julie Jung et al. (2020) Multimodal mechanosensing enables treefrog embryos escape egg-predators. doi:10.1242/jeb.236141","code":""},{"path":"https://stacks.tidymodels.org/reference/example_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Example Objects — example_data","text":"Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. source code generating objects given .","code":"# setup: packages, data, resample, basic recipe ------------------------ library(stacks) library(tune) library(rsample) library(parsnip) library(workflows) library(recipes) library(yardstick) library(workflowsets)  set.seed(1)  ctrl_grid <-    tune::control_grid(     save_pred = TRUE,     save_workflow = TRUE   )  ctrl_res <-    tune::control_resamples(     save_pred = TRUE,     save_workflow = TRUE   )  # for regression, predict latency to hatch (excluding NAs) tree_frogs_reg <-    tree_frogs %>%    filter(!is.na(latency)) %>%   select(-clutch, -hatched)  set.seed(1) tree_frogs_reg_split <- rsample::initial_split(tree_frogs_reg)  set.seed(1) tree_frogs_reg_train <- rsample::training(tree_frogs_reg_split)  set.seed(1) tree_frogs_reg_test  <- rsample::testing(tree_frogs_reg_split)  set.seed(1) reg_folds <- rsample::vfold_cv(tree_frogs_reg_train, v = 5)  tree_frogs_reg_rec <-    recipes::recipe(latency ~ ., data = tree_frogs_reg_train) %>%   recipes::step_dummy(recipes::all_nominal()) %>%   recipes::step_zv(recipes::all_predictors())  metric <- yardstick::metric_set(yardstick::rmse)  # linear regression --------------------------------------- lin_reg_spec <-   parsnip::linear_reg() %>%   parsnip::set_engine(\"lm\")  reg_wf_lr <-    workflows::workflow() %>%   workflows::add_model(lin_reg_spec) %>%   workflows::add_recipe(tree_frogs_reg_rec)  set.seed(1) reg_res_lr <-    tune::fit_resamples(     object = reg_wf_lr,     resamples = reg_folds,     metrics = metric,     control = ctrl_res   )  # SVM regression ---------------------------------- svm_spec <-    parsnip::svm_rbf(     cost = tune::tune(),      rbf_sigma = tune::tune()   ) %>%   parsnip::set_engine(\"kernlab\") %>%   parsnip::set_mode(\"regression\")  reg_wf_svm <-    workflows::workflow() %>%   workflows::add_model(svm_spec) %>%   workflows::add_recipe(tree_frogs_reg_rec)  set.seed(1) reg_res_svm <-    tune::tune_grid(     object = reg_wf_svm,     resamples = reg_folds,      grid = 5,     control = ctrl_grid   )  # spline regression --------------------------------------- spline_rec <-    tree_frogs_reg_rec %>%   recipes::step_ns(age, deg_free = tune::tune(\"age\"))  reg_wf_sp <-    workflows::workflow() %>%   workflows::add_model(lin_reg_spec) %>%   workflows::add_recipe(spline_rec)  set.seed(1) reg_res_sp <-    tune::tune_grid(     object = reg_wf_sp,     resamples = reg_folds,     metrics = metric,     control = ctrl_grid   )  # classification - preliminaries ----------------------------------- tree_frogs_class <-    tree_frogs %>%   dplyr::select(-c(clutch, latency))  set.seed(1) tree_frogs_class_split <- rsample::initial_split(tree_frogs_class)  set.seed(1) tree_frogs_class_train <- rsample::training(tree_frogs_class_split)  set.seed(1) tree_frogs_class_test  <- rsample::testing(tree_frogs_class_split)  set.seed(1) class_folds <- rsample::vfold_cv(tree_frogs_class_train, v = 5)  tree_frogs_class_rec <-    recipes::recipe(reflex ~ ., data = tree_frogs_class_train) %>%   recipes::step_dummy(recipes::all_nominal(), -reflex) %>%   recipes::step_zv(recipes::all_predictors()) %>%   recipes::step_normalize(recipes::all_numeric())  # random forest classification -------------------------------------- rand_forest_spec <-    parsnip::rand_forest(     mtry = tune::tune(),     trees = 500,     min_n = tune::tune()   ) %>%   parsnip::set_mode(\"classification\") %>%   parsnip::set_engine(\"ranger\")  class_wf_rf <-   workflows::workflow() %>%   workflows::add_recipe(tree_frogs_class_rec) %>%   workflows::add_model(rand_forest_spec)  set.seed(1) class_res_rf <-    tune::tune_grid(     object = class_wf_rf,      resamples = class_folds,      grid = 10,     control = ctrl_grid   )  # neural network classification ------------------------------------- nnet_spec <-   mlp(hidden_units = 5, penalty = 0.01, epochs = 100) %>%   set_mode(\"classification\") %>%   set_engine(\"nnet\")  class_wf_nn <-    workflows::workflow() %>%   workflows::add_recipe(tree_frogs_class_rec) %>%   workflows::add_model(nnet_spec)  set.seed(1) class_res_nn <-   tune::fit_resamples(     object = class_wf_nn,      resamples = class_folds,      control = ctrl_res   )  # binary classification -------------------------------- tree_frogs_2_class_rec <-    recipes::recipe(hatched ~ ., data = tree_frogs_class_train) %>%   recipes::step_dummy(recipes::all_nominal(), -hatched) %>%   recipes::step_zv(recipes::all_predictors()) %>%   recipes::step_normalize(recipes::all_numeric())  set.seed(1) rand_forest_spec_2 <-    parsnip::rand_forest(     mtry = tune(),     trees = 500,     min_n = tune()   ) %>%   parsnip::set_mode(\"classification\") %>%   parsnip::set_engine(\"ranger\")  log_wf_rf <-   workflows::workflow() %>%   workflows::add_recipe(tree_frogs_2_class_rec) %>%   workflows::add_model(rand_forest_spec_2)  set.seed(1) log_res_rf <-    tune::tune_grid(     object = log_wf_rf,      resamples = class_folds,      grid = 10,     control = ctrl_grid   )  nnet_spec_2 <-   parsnip::mlp(epochs = 100, hidden_units = 5, penalty = 0.1) %>%   parsnip::set_mode(\"classification\") %>%   parsnip::set_engine(\"nnet\", verbose = 0)  log_wf_nn <-    workflows::workflow() %>%   workflows::add_recipe(tree_frogs_2_class_rec) %>%   workflows::add_model(nnet_spec_2)  set.seed(1) log_res_nn <-   tune::fit_resamples(     object = log_wf_nn,      resamples = class_folds,      control = ctrl_res   )"},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit model stack members with non-zero stacking coefficients — fit_members","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"evaluating data stack blend_predictions(), number candidates nonzero stacking coefficients. candidates referred \"members.\" Since members' predictions ultimately inform model stack's predictions, members trained full training set using fit_members().","code":""},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"","code":"fit_members(model_stack, ...)"},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"model_stack model_stack object outputted blend_predictions(). ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"model_stack object subclass linear_stack---fitted model contains necessary components predict new data.","code":""},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"fit members parallel, please register parallel backend function. See documentation foreach::foreach() examples.","code":""},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"example-data","dir":"Reference","previous_headings":"","what":"Example Data","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"package provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos! Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. See ?example_data learn objects, well browse source code generated .","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/fit_members.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit model stack members with non-zero stacking coefficients — fit_members","text":"","code":"# \\donttest{  # see the \"Example Data\" section above for # clarification on the objects used in these examples!  # put together a data stack reg_st <-    stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_svm) %>%   add_candidates(reg_res_sp)    reg_st #> # A data stack with 3 model definitions and 16 candidate members: #> #   reg_res_lr: 1 model configuration #> #   reg_res_svm: 5 model configurations #> #   reg_res_sp: 10 model configurations #> # Outcome: latency (numeric)  # evaluate the data stack and fit the member models reg_st %>%   blend_predictions() %>%   fit_members() #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 16 possible candidate members, the ensemble retained 3. #> Penalty: 1e-04. #> Mixture: 1. #>  #> The 3 highest weighted members are: #> # A tibble: 3 × 3 #>   member          type         weight #>   <chr>           <chr>         <dbl> #> 1 reg_res_svm_1_3 svm_rbf    0.722    #> 2 reg_res_sp_03_1 linear_reg 0.478    #> 3 reg_res_sp_10_1 linear_reg 0.000715    reg_st #> # A data stack with 3 model definitions and 16 candidate members: #> #   reg_res_lr: 1 model configuration #> #   reg_res_svm: 5 model configurations #> #   reg_res_sp: 10 model configurations #> # Outcome: latency (numeric)    # do the same with multinomial classification models class_st <-   stacks() %>%   add_candidates(class_res_nn) %>%   add_candidates(class_res_rf) %>%   blend_predictions() %>%   fit_members() #> Warning: Predictions from 1 candidate were identical to those from existing candidates and were removed from the data stack. #> ! Bootstrap14: preprocessor 1/1, model 1/1: from glmnet C++ code (error code -92)...    class_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 21 possible candidate members, the ensemble retained 6. #> Penalty: 0.1. #> Mixture: 1. #> Across the 3 classes, there are an average of 3 coefficients per class. #>  #> The 6 highest weighted member classes are: #> # A tibble: 6 × 4 #>   member                       type        weight class #>   <chr>                        <chr>        <dbl> <chr> #> 1 .pred_full_class_res_rf_1_05 rand_forest 3.05   full  #> 2 .pred_full_class_res_rf_1_07 rand_forest 0.921  full  #> 3 .pred_mid_class_res_rf_1_06  rand_forest 0.673  mid   #> 4 .pred_full_class_res_rf_1_01 rand_forest 0.248  full  #> 5 .pred_full_class_res_rf_1_06 rand_forest 0.0403 full  #> 6 .pred_full_class_res_rf_1_04 rand_forest 0.0227 full     # ...or binomial classification models log_st <-   stacks() %>%   add_candidates(log_res_nn) %>%   add_candidates(log_res_rf) %>%   blend_predictions() %>%   fit_members()    log_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 11 possible candidate members, the ensemble retained 3. #> Penalty: 1e-04. #> Mixture: 1. #>  #> The 3 highest weighted member classes are: #> # A tibble: 3 × 3 #>   member                    type        weight #>   <chr>                     <chr>        <dbl> #> 1 .pred_yes_log_res_nn_1_1  mlp          7.45  #> 2 .pred_yes_log_res_rf_1_05 rand_forest  3.33  #> 3 .pred_yes_log_res_rf_1_09 rand_forest  0.153  # }"},{"path":"https://stacks.tidymodels.org/reference/get_expressions.html","id":null,"dir":"Reference","previous_headings":"","what":"Obtain prediction equations for all possible values of type — get_expressions","title":"Obtain prediction equations for all possible values of type — get_expressions","text":"Obtain prediction equations possible values type","code":""},{"path":"https://stacks.tidymodels.org/reference/get_expressions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obtain prediction equations for all possible values of type — get_expressions","text":"","code":"get_expressions(x, ...)  # S3 method for `_multnet` get_expressions(x, ...)  # S3 method for `_lognet` get_expressions(x, ...)  # S3 method for `_elnet` get_expressions(x, ...)"},{"path":"https://stacks.tidymodels.org/reference/get_expressions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obtain prediction equations for all possible values of type — get_expressions","text":"x parsnip model glmnet engine. ... used","code":""},{"path":"https://stacks.tidymodels.org/reference/get_expressions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obtain prediction equations for all possible values of type — get_expressions","text":"named list prediction equations possibel type.","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.data_stack.html","id":null,"dir":"Reference","previous_headings":"","what":"Predicting with a model stack — predict.data_stack","title":"Predicting with a model stack — predict.data_stack","text":"data stack must evaluated blend_predictions() member models fitted fit_members() predict new data.","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.data_stack.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predicting with a model stack — predict.data_stack","text":"","code":"# S3 method for data_stack predict(object, ...)"},{"path":"https://stacks.tidymodels.org/reference/predict.data_stack.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predicting with a model stack — predict.data_stack","text":"object data stack. ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.model_stack.html","id":null,"dir":"Reference","previous_headings":"","what":"Predicting with a model stack — predict.model_stack","title":"Predicting with a model stack — predict.model_stack","text":"Apply model stack create different types predictions.","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.model_stack.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predicting with a model stack — predict.model_stack","text":"","code":"# S3 method for model_stack predict(object, new_data, type = NULL, members = FALSE, opts = list(), ...)"},{"path":"https://stacks.tidymodels.org/reference/predict.model_stack.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predicting with a model stack — predict.model_stack","text":"object model stack fitted members outputted fit_members(). new_data rectangular data object, data frame. type Format returned predicted values—one \"numeric\", \"class\", \"prob\". NULL, predict() choose appropriate value based model's mode. members Logical. Whether additionally return predictions ensemble members. opts list optional arguments underlying predict function passed parsnip::predict.model_fit member. ... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.model_stack.html","id":"example-data","dir":"Reference","previous_headings":"","what":"Example Data","title":"Predicting with a model stack — predict.model_stack","text":"package provides resampling objects datasets use examples vignettes derived study 1212 red-eyed tree frog embryos! Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely ! Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes. reg_folds class_folds rset cross-fold validation objects rsample, splitting training data regression classification model objects, respectively. tree_frogs_reg_test tree_frogs_class_test analogous testing sets. reg_res_lr, reg_res_svm, reg_res_sp contain regression tuning results linear regression, support vector machine, spline model, respectively, fitting latency (.e. long embryos took hatch response jiggle) tree_frogs data, using variables predictors. Note data underlying models filtered include data embryos hatched response stimulus. class_res_rf class_res_nn contain multiclass classification tuning results random forest neural network classification model, respectively, fitting reflex (measure ear function) data using variables predictors. log_res_rf log_res_nn, contain binary classification tuning results random forest neural network classification model, respectively, fitting hatched (whether embryos hatched response stimulus) using variables predictors. See ?example_data learn objects, well browse source code generated .","code":""},{"path":"https://stacks.tidymodels.org/reference/predict.model_stack.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predicting with a model stack — predict.model_stack","text":"","code":"# \\donttest{  # see the \"Example Data\" section above for # clarification on the data and tuning results # objects used in these examples!  data(tree_frogs_reg_test) data(tree_frogs_class_test)  # build and fit a regression model stack reg_st <-   stacks() %>%   add_candidates(reg_res_lr) %>%   add_candidates(reg_res_sp) %>%   blend_predictions() %>%   fit_members()  reg_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 11 possible candidate members, the ensemble retained 4. #> Penalty: 0.1. #> Mixture: 1. #>  #> The 4 highest weighted members are: #> # A tibble: 4 × 3 #>   member          type       weight #>   <chr>           <chr>       <dbl> #> 1 reg_res_sp_03_1 linear_reg 0.483  #> 2 reg_res_sp_10_1 linear_reg 0.249  #> 3 reg_res_lr_1_1  linear_reg 0.126  #> 4 reg_res_sp_05_1 linear_reg 0.0673  # predict on the tree frogs testing data predict(reg_st, tree_frogs_reg_test) #> # A tibble: 143 × 1 #>    .pred #>    <dbl> #>  1 119.  #>  2  81.5 #>  3 102.  #>  4  35.6 #>  5 119.  #>  6  50.6 #>  7 122.  #>  8  82.7 #>  9  50.3 #> 10  75.7 #> # … with 133 more rows  # include the predictions from the members predict(reg_st, tree_frogs_reg_test, members = TRUE) #> # A tibble: 143 × 5 #>    .pred reg_res_lr_1_1 reg_res_sp_10_1 reg_res_sp_05_1 reg_res_sp_03_1 #>    <dbl>          <dbl>           <dbl>           <dbl>           <dbl> #>  1 119.           138.            125.            121.            114.  #>  2  81.5           82.4            84.8            81.8            77.1 #>  3 102.           116.            111.            112.             93.3 #>  4  35.6           35.8            29.7            32.5            29.6 #>  5 119.           111.            115.            115.            127.  #>  6  50.6           38.8            37.4            36.2            55.3 #>  7 122.           123.            103.            104.            137.  #>  8  82.7           82.3            78.6            82.0            82.8 #>  9  50.3           38.7            37.3            36.2            54.8 #> 10  75.7           78.8            75.3            76.9            71.8 #> # … with 133 more rows  # build and fit a classification model stack class_st <-   stacks() %>%   add_candidates(class_res_nn) %>%   add_candidates(class_res_rf) %>%   blend_predictions() %>%   fit_members() #> Warning: Predictions from 1 candidate were identical to those from existing candidates and were removed from the data stack. #> ! Bootstrap05: preprocessor 1/1, model 1/1: from glmnet C++ code (error code -67)...   class_st #> ── A stacked ensemble model ───────────────────────────────────── #>  #> Out of 21 possible candidate members, the ensemble retained 12. #> Penalty: 0.001. #> Mixture: 1. #> Across the 3 classes, there are an average of 4 coefficients per class. #>  #> The 10 highest weighted member classes are: #> # A tibble: 10 × 4 #>    member                       type        weight class #>    <chr>                        <chr>        <dbl> <chr> #>  1 .pred_mid_class_res_rf_1_08  rand_forest   7.39 low   #>  2 .pred_mid_class_res_rf_1_07  rand_forest   5.97 low   #>  3 .pred_mid_class_res_nn_1_1   mlp           5.46 mid   #>  4 .pred_full_class_res_rf_1_05 rand_forest   4.81 full  #>  5 .pred_mid_class_res_rf_1_01  rand_forest   4.67 mid   #>  6 .pred_full_class_res_nn_1_1  mlp           4.11 full  #>  7 .pred_mid_class_res_rf_1_06  rand_forest   3.73 mid   #>  8 .pred_full_class_res_rf_1_07 rand_forest   2.44 full  #>  9 .pred_mid_class_res_rf_1_10  rand_forest   2.13 mid   #> 10 .pred_full_class_res_rf_1_01 rand_forest   1.17 full   # predict reflex, first as a class, then as # class probabilities predict(class_st, tree_frogs_class_test) #> # A tibble: 303 × 1 #>    .pred_class #>    <fct>       #>  1 low         #>  2 full        #>  3 full        #>  4 full        #>  5 low         #>  6 low         #>  7 low         #>  8 low         #>  9 low         #> 10 low         #> # … with 293 more rows predict(class_st, tree_frogs_class_test, type = \"prob\") #> # A tibble: 303 × 3 #>    .pred_full .pred_low .pred_mid #>         <dbl>     <dbl>     <dbl> #>  1 0.999       0.000563  0.000259 #>  2 0.000102    0.472     0.528    #>  3 0.00000683  0.179     0.821    #>  4 0.000153    0.405     0.595    #>  5 0.998       0.00147   0.000331 #>  6 0.999       0.000686  0.000259 #>  7 0.999       0.000507  0.000255 #>  8 0.999       0.000686  0.000259 #>  9 0.999       0.000563  0.000259 #> 10 0.999       0.000563  0.000259 #> # … with 293 more rows  # returning the member predictions as well predict(   class_st,    tree_frogs_class_test,    type = \"prob\",    members = TRUE ) #> # A tibble: 303 × 27 #>    .pred_full .pred_low .pred_mid .pred_low_class_res_rf… .pred_low_class… #>         <dbl>     <dbl>     <dbl>                   <dbl>            <dbl> #>  1 0.999       0.000563  0.000259                  0.0380          0       #>  2 0.000102    0.472     0.528                     0.523           0.391   #>  3 0.00000683  0.179     0.821                     0.305           0.182   #>  4 0.000153    0.405     0.595                     0.535           0.467   #>  5 0.998       0.00147   0.000331                  0.216           0.00109 #>  6 0.999       0.000686  0.000259                  0.117           0       #>  7 0.999       0.000507  0.000255                  0.0415          0       #>  8 0.999       0.000686  0.000259                  0.117           0       #>  9 0.999       0.000563  0.000259                  0.0380          0       #> 10 0.999       0.000563  0.000259                  0.0380          0       #> # … with 293 more rows, and 22 more variables: #> #   .pred_low_class_res_nn_1_1 <dbl>, .pred_low_class_res_rf_1_01 <dbl>, #> #   .pred_low_class_res_rf_1_06 <dbl>, .pred_low_class_res_rf_1_10 <dbl>, #> #   .pred_low_class_res_rf_1_05 <dbl>, .pred_low_class_res_rf_1_04 <dbl>, #> #   .pred_mid_class_res_rf_1_08 <dbl>, .pred_mid_class_res_rf_1_07 <dbl>, #> #   .pred_mid_class_res_nn_1_1 <dbl>, .pred_mid_class_res_rf_1_01 <dbl>, #> #   .pred_mid_class_res_rf_1_06 <dbl>, …  # }"},{"path":"https://stacks.tidymodels.org/reference/prediction_eqn.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert one or more linear predictor to a format used for prediction — prediction_eqn","title":"Convert one or more linear predictor to a format used for prediction — prediction_eqn","text":"Convert one linear predictor format used prediction","code":""},{"path":"https://stacks.tidymodels.org/reference/prediction_eqn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert one or more linear predictor to a format used for prediction — prediction_eqn","text":"","code":"prediction_eqn(x, ...)  # S3 method for `_lognet` prediction_eqn(x, type = \"class\", ...)  # S3 method for `_elnet` prediction_eqn(x, type = \"numeric\", ...)  # S3 method for `_multnet` prediction_eqn(x, type = \"class\", ...)"},{"path":"https://stacks.tidymodels.org/reference/prediction_eqn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert one or more linear predictor to a format used for prediction — prediction_eqn","text":"x object uses glmnet::glmnet() model numeric predictors. ... currently used. type prediction type.","code":""},{"path":"https://stacks.tidymodels.org/reference/prediction_eqn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert one or more linear predictor to a format used for prediction — prediction_eqn","text":"return type varies, based model prediction type.","code":""},{"path":"https://stacks.tidymodels.org/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. butcher axe_call, axe_ctrl, axe_data, axe_env, axe_fitted, butcher dplyr %>% ggplot2 autoplot","code":""},{"path":"https://stacks.tidymodels.org/reference/stack_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert one or more linear predictor to a format used for prediction — stack_predict","title":"Convert one or more linear predictor to a format used for prediction — stack_predict","text":"Convert one linear predictor format used prediction","code":""},{"path":"https://stacks.tidymodels.org/reference/stack_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert one or more linear predictor to a format used for prediction — stack_predict","text":"","code":"stack_predict(x, ...)  # S3 method for elnet_numeric stack_predict(x, data, ...)  # S3 method for lognet_class stack_predict(x, data, ...)  # S3 method for lognet_prob stack_predict(x, data, ...)  # S3 method for multnet_class stack_predict(x, data, ...)  # S3 method for multnet_prob stack_predict(x, data, ...)"},{"path":"https://stacks.tidymodels.org/reference/stack_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert one or more linear predictor to a format used for prediction — stack_predict","text":"x set model expressions generated prediction_eqn(). ... currently used. type prediction type.","code":""},{"path":"https://stacks.tidymodels.org/reference/stack_predict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert one or more linear predictor to a format used for prediction — stack_predict","text":"return type varies, based model prediction type.","code":""},{"path":"https://stacks.tidymodels.org/reference/stacks.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize a Stack — stacks","title":"Initialize a Stack — stacks","text":"stacks() function initializes data_stack object. Principally, data_stacks tibbles, first column gives true outcome assessment set, remaining columns give predictions candidate ensemble member. (outcome numeric, ’s one column per candidate member. classification, many columns per candidate member levels outcome variable minus 1.) also bring along extra attributes keep track model definitions, resamples, training data. See ?stacks_description discussion package, generally, basics vignette detailed walk-functionality.","code":""},{"path":"https://stacks.tidymodels.org/reference/stacks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize a Stack — stacks","text":"","code":"stacks(...)"},{"path":"https://stacks.tidymodels.org/reference/stacks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize a Stack — stacks","text":"... Additional arguments. Currently ignored.","code":""},{"path":"https://stacks.tidymodels.org/reference/stacks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialize a Stack — stacks","text":"data_stack object.","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/stacks_description.html","id":null,"dir":"Reference","previous_headings":"","what":"stacks: Tidy Model Stacking — stacks_description","title":"stacks: Tidy Model Stacking — stacks_description","text":"Model stacking ensemble technique involves training model combine outputs many diverse statistical models, shown improve predictive performance variety settings. 'stacks' implements grammar 'tidymodels'-aligned model stacking.","code":""},{"path":[]},{"path":"https://stacks.tidymodels.org/reference/stacks_description.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"stacks: Tidy Model Stacking — stacks_description","text":"Maintainer: Simon Couch simonpatrickcouch@gmail.com Authors: Max Kuhn max@rstudio.com contributors: RStudio [copyright holder, funder]","code":""},{"path":"https://stacks.tidymodels.org/reference/tree_frogs.html","id":null,"dir":"Reference","previous_headings":"","what":"Tree frog embryo hatching data — tree_frogs","title":"Tree frog embryo hatching data — tree_frogs","text":"dataset containing experimental results hatching behavior red-eyed tree frog embryos. Red-eyed tree frog (RETF) embryos can hatch earlier normal 7ish days detect potential predator threat. Researchers wanted determine , , tree frog embryos able detect stimulus environment. , subjected embryos varying developmental stages \"predator stimulus\" jiggling embryos blunt probe. Beforehand, though embryos treated gentamicin, compound knocks lateral line (sensory organ.) Researcher Julie Jung crew found factors inform whether embryo hatches prematurely !","code":""},{"path":"https://stacks.tidymodels.org/reference/tree_frogs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tree frog embryo hatching data — tree_frogs","text":"","code":"tree_frogs"},{"path":"https://stacks.tidymodels.org/reference/tree_frogs.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Tree frog embryo hatching data — tree_frogs","text":"data frame 1212 rows 6 variables: clutch RETFs lay eggs gelatinous \"clutches\" 30-40 eggs. Eggs clutch ID siblings ! variable useful mixed effects models. (Unordered factor.) treatment treatment group embryo. Either \"gentamicin\", compound knocks embryos' lateral line, \"control\" negative control group (.e. sensory organs intact). (Character.) reflex measure ear function called vestibulo-ocular reflex, categorized bins. Ear function increases factor levels \"low\", \"mid\", \"full\". (Ordered factor.) age Age embryo, seconds, time embryo jiggled. (Numeric, seconds.) t_o_d time day stimulus (.e. jiggle) applied. \"morning\" 5 .m. noon, \"afternoon\" noon 8 p.m., \"night\" 8 p.m. 5 .m. (Character.) hatched Whether embryo hatched response jiggling! Either \"yes\" \"\". (Character.) latency Time elapsed stimulus (.e. jiggling) hatching response stimulus, seconds. Missing values indicate embryo hatch response stimulus. (Numeric, seconds.)","code":""},{"path":"https://stacks.tidymodels.org/reference/tree_frogs.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Tree frog embryo hatching data — tree_frogs","text":"Julie Jung et al. (2020) Multimodal mechanosensing enables treefrog embryos escape egg-predators. doi:10.1242/jeb.236141","code":""},{"path":"https://stacks.tidymodels.org/reference/tree_frogs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Tree frog embryo hatching data — tree_frogs","text":"Note data included stacks package necessarily representative unbiased subset complete dataset, demonstrative purposes.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"stacks-023","dir":"Changelog","previous_headings":"","what":"stacks 0.2.3","title":"stacks 0.2.3","text":"CRAN release: 2022-05-12 Addressed deprecation warning add_candidates (#99). Improved clarity warnings/errors related failed hyperparameter tuning resample fitting (#110). Reduced model stack object size fixed bug object size model stack inflated drastically saving file (#116). Also, regenerated example objects change–saved model objects may need regenerated order interface newer versions package. Introduced times argument blend_predictions passed rsample::bootstraps fitting stacking coefficients. Reducing argument default (25) greatly reduces run time blend_predictions (#94). package now load packages necessary model fitting fit_members(), available, fail informatively (#118). Fixed bug meta-learner tuning fail outcome names levels including string \"class\" (#125).","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"stacks-022","dir":"Changelog","previous_headings":"","what":"stacks 0.2.2","title":"stacks 0.2.2","text":"CRAN release: 2022-01-06 Fixed errors arising outcome levels valid column names multinomial classification setting. Fixed collect_parameters failing return stacking coefficients two-class classification setting. Regenerated example objects updated {rsample} fingerprinting–saved model objects may need regenerated order build stacks combining models generated update.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"stacks-021","dir":"Changelog","previous_headings":"","what":"stacks 0.2.1","title":"stacks 0.2.1","text":"CRAN release: 2021-07-23 Updates importing workflow sets use add_variables() preprocessor. Plot fixes cases coefficients negative. Performance member plots now show effect multiple mixture values. Package diagrams now alt text.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"stacks-020","dir":"Changelog","previous_headings":"","what":"stacks 0.2.0","title":"stacks 0.2.0","text":"CRAN release: 2021-04-20","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"breaking-changes-0-2-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"stacks 0.2.0","text":"release package changes elements internal structure model stacks. , model stacks stored saved objects need regenerated predicting, plotting, printing, etc.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"new-features-0-2-0","dir":"Changelog","previous_headings":"","what":"New features","title":"stacks 0.2.0","text":"package now supports elastic net models meta-learner via mixture argument blend_predictions. package can now add candidates workflow_map objects new {workflowsets} package. interface add_candidates tune_results objects, add_candidates now generic function. Objects tuned racing methods {finetune} package can now added candidate members.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"bug-fixes-0-2-0","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"stacks 0.2.0","text":"Fixed bug determining member hyperparameters member fitting using non-RMSE/ROC AUC metrics. Fixed bug arising model definition names valid column names. package now message case provided names valid column names use make.names associated candidate members.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"miscellaneous-improvements-0-2-0","dir":"Changelog","previous_headings":"","what":"Miscellaneous improvements","title":"stacks 0.2.0","text":"Drop {digest} dependency favor {tune}/{rsample} “fingerprinting” check consistency resamples. fit_members() now warn supplied model stack whose members already fitted. Integrate {tune} functionality appropriately coloring errors, warnings, messages. Improved faceting axis scales make autoplot type = \"members\" informative. Various improvements documentation.","code":""},{"path":"https://stacks.tidymodels.org/news/index.html","id":"stacks-010","dir":"Changelog","previous_headings":"","what":"stacks 0.1.0","title":"stacks 0.1.0","text":"CRAN release: 2020-11-23 Initial release!","code":""}]
